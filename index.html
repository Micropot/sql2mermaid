<!DOCTYPE html>
<html>
  <head>
      <meta charset="utf-8" />
      <meta name="viewport" content="width=device-width,initial-scale=1" />
      <link rel="stylesheet" href="index.css">
      <title>Sql2Mermaid : GUI</title>
      <link rel="stylesheet" href="https://pyscript.net/releases/2024.11.1/core.css">
      <script type="module" src="https://pyscript.net/releases/2024.11.1/core.js"></script>
  </head>
  <body>
    <h1>Mermaid Diagram Generator</h1>
    <textarea id="mermaid-code" placeholder="Enter your Mermaid diagram code here..."></textarea>
    <button py-click="generate_graph", id="generate-button">Generate mermaid graph</button>
    <pre class="mermaid" id="output">
        <p>Your diagram will be there...</p>
    </pre>
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs';
        mermaid.initialize({startOnLoad: false});
        document.getElementById("generate-button").addEventListener("click", () => {
            setTimeout(() => {  // Petit délai pour s'assurer que PyScript a mis à jour le contenu
                mermaid.run();
            }, 500);
        });
    </script>
    <script type="py" src="./generate_graph.py" config="./pyscript.json"></script>
  </body>
</html>
